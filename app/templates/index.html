<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>check</title>

    <!-- Load mock before Telegram script for local development -->
    {% if config.TELEGRAM_MOCK %}
    <script src="{{ url_for('static', filename='scripts/telegram-mock.js') }}"></script>
    {% endif %}
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&text=square&display=block">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/index.css') }}">
</head>
<body>
    <div class="projects">
        {% for item in projects %}
            {% set project = item.project %}
            {% set staleness = item.staleness_ratio %}
            <div class="project" 
                 data-id="{{ project.id }}" 
                 data-staleness="{{ '%.3f'|format(staleness) }}"
                 onclick="location.href='/project/{{ project.id }}'">
                <h2>{{ project.name }}</h2>
                <p class="description">{{ project.description }}</p>
            </div>
        {% endfor %}

        <div class="project new-project">
            <a href="/project/new">+ Новый проект</a>
        </div>

        <script src="{{ url_for('static', filename='scripts/project_staleness.js') }}"></script>
        <script src="{{ url_for('static', filename='scripts/telegram-init.js') }}"></script>
        <script src="{{ url_for('static', filename='scripts/todo.js') }}"></script>
    </div>
</body>
</html>